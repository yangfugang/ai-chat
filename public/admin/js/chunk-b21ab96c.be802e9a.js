(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b21ab96c"],{"0af9":function(e,t,i){"use strict";i("6326")},"3c35":function(e,t){(function(t){e.exports=t}).call(this,{})},4344:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"pc_customerServer_container"},[t("div",{staticClass:"pc_customerServer_container_header"},[t("div",{staticClass:"pc_customerServer_container_header_title"},[t("img",{attrs:{src:e.chatServerData.to_user_avatar,alt:""},on:{click:e.onBackPress}}),t("span",[e._v(e._s(e.chatServerData.to_user_nickname))])]),"1"!=e.upperData.noCanClose&&0===e.userAgentType?t("div",{staticClass:"pc_customerServer_container_header_handle",on:{click:e.closeIframe}},[t("span",{staticClass:"iconfont"},[e._v("")])]):e._e()]),t("div",{staticClass:"pc_customerServer_container_content"},[e.isShowProductModel?t("div",{staticClass:"productMessage_container"},[t("div",{staticClass:"productMessage_container_image"},[t("img",{attrs:{src:e.productMessage.image,alt:""}})]),t("div",{staticClass:"productMessage_container_content"},[t("div",{staticClass:"productMessage_container_content_title"},[e._v(e._s(e.productMessage.store_name))]),t("div",{staticClass:"productMessage_container_content_priceOrHandle"},[t("div",[e._v("￥"+e._s(e.productMessage.price))]),t("div",{on:{click:e.sendProduct}},[e._v("发送客服")])])])]):e._e(),t("happy-scroll",{attrs:{size:"1",resize:"","hide-horizontal":"","scroll-top":e.scrollTop},on:{"vertical-start":e.scrollHandler}},[t("div",{staticClass:"scroll_content",class:{pt140:e.isShowProductModel},attrs:{id:"chat_scroll"}},[t("Spin",{directives:[{name:"show",rawName:"v-show",value:e.isLoad,expression:"isLoad"}]},[t("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"ios-loading",size:"18"}}),t("div",[e._v("Loading")])],1),t("div",{staticClass:"chart_list"},e._l(e.records,(function(i,n){return t("div",{key:n,staticClass:"chart_list_item"},[t("div",{directives:[{name:"show",rawName:"v-show",value:i.show,expression:"item.show"}],staticClass:"chart_list_item_time"},[e._v(e._s(i.time))]),t("div",{staticClass:"chart_list_item_content",class:{"right-box":i.user_id==e.chatServerData.user_id}},[t("div",{staticClass:"chart_list_item_avatar"},[t("img",{attrs:{src:i.avatar,alt:""}})]),i.msn_type<=2?t("div",{staticClass:"chart_list_item_text"},[t("span",{domProps:{innerHTML:e._s(e.replace_em(i.msn))}})]):e._e(),3==i.msn_type?t("div",{staticClass:"chart_list_item_img"},[t("img",{directives:[{name:"lazy",rawName:"v-lazy",value:i.msn,expression:"item.msn"}],on:{load:e.imageLoad}})]):e._e(),5==i.msn_type?t("div",{staticClass:"chart_list_item_imgOrText"},[t("div",{staticClass:"order-wrapper"},[t("div",{staticClass:"img-box"},[t("img",{attrs:{src:i.other.image,alt:""}})]),t("div",{staticClass:"order-info"},[t("div",{staticClass:"price-box"},[t("div",{staticClass:"num"},[e._v("¥ "+e._s(i.other.price))])]),t("div",{staticClass:"name"},[e._v(e._s(i.other.store_name))])])])]):e._e()])])})),0)],1)])],1),t("div",{staticClass:"footer_customerServer_container"},[t("div",{staticClass:"mobel_customerServer_container_footer"},[t("div",{staticClass:"crmchat_link",on:{click:e.tolink}},[t("span",[e._v("")])]),t("div",{staticClass:"mobel_customerServer_container_footer_uploag_image"},[t("span",{staticClass:"iconfont"},[e._v("")]),t("input",{staticClass:"file_input",attrs:{type:"file"},on:{change:e.uploadFile}})]),t("div",{staticClass:"mobel_customerServer_container_footer_input"},[t("div",{staticClass:"mobel_customerServer_container_footer_input_con"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.userMessage,expression:"userMessage"}],staticClass:"font",attrs:{placeholder:"请输入内容"},domProps:{value:e.userMessage},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendText.apply(null,arguments)},focus:e.textareaInput,input:[function(t){t.target.composing||(e.userMessage=t.target.value)},function(t){return e.textareaChange(t)}]}}),t("p",{staticClass:"font",domProps:{innerHTML:e._s(e.pCont)}})])]),t("div",{staticClass:"mobel_customerServer_container_footer_emoji",on:{click:e.selectEmoji}},[t("span",{staticClass:"iconfont"},[e._v("")])]),t("div",{staticClass:"sendMessage",class:{"sendMessage-primary":e.userMessage}},[t("div",{on:{click:e.sendText}},[e._v("发送")])])]),t("div",{staticClass:"mobel_customerServer_container_footer_emojiList",class:{canSelectemoji:2==e.inputConType}},e._l(e.emojiList,(function(i,n){return 2==e.inputConType?t("div",{key:n,staticClass:"emoji-item"},[t("i",{staticClass:"em",class:i,on:{click:function(t){return t.stopPropagation(),e.select(i)}}})]):e._e()})),0)])])},a=[],s=(i("a481"),i("6db4")),r=i("7624"),o=i("c58a"),c=(i("5157"),{components:{HappyScroll:s["HappyScroll"]},mixins:[o["a"]],data:function(){return{isLoad:!1,scrollTop:0,emojiList:r["a"],pCont:"",deviceType:"mobile"}},mounted:function(){0!==this.userAgentType&&window.addEventListener("popstate",this.handlePopstate)},beforeDestroy:function(){0!==this.userAgentType&&window.removeEventListener("popstate",this.handlePopstate)},computed:{records:function(){var e=this;return this.chatServerData.serviceList.map((function(t,i){return t.time=e.$moment(1e3*t.add_time).format("MMMDo H:mm"),i?t.add_time-e.chatServerData.serviceList[i-1].add_time>=300?t.show=!0:t.show=!1:t.show=!0,t}))}},methods:{onBackPress:function(){alert(uniWeb),uniWeb.webView.navigateBack({delta:history.length,fail:function(e){alert(e)}})},handlePopstate:function(){alert(history.length),uniWeb.webView.navigateBack({delta:history.length}),history.pushState(null,null,document.URL)},textareaChange:function(e){var t=e.target.value.replace(/\n\s(\s)*/gi,"\n");t=t.replace(/^\s*/gi,"");var i=t.replace(/</gi,"&lt;");i=t.replace(/\n(\n)*/gi,"<br>"),i=i.replace(/\s+/gi,"&nbsp;"),t=i.replace(/&nbsp;/gi," "),t=t.replace(/<br>/gi,"\n"),t=t.replace(/&lt;/gi,"<"),this.userMessage=t,this.pCont=i+"."},getScrollTop:function(){console.log(123)},getScrollEnd:function(){console.log(321)},replace_em:function(e){return e=e.replace(/\[em-([\s\S]*)\]/g,"<span class='em em-$1'/></span>"),e}}}),d=c,u=(i("0af9"),i("2877")),l=Object(u["a"])(d,n,a,!1,null,"84033e12",null);t["default"]=l.exports},5157:function(e,t,i){"use strict";(function(e){var t=i("7618");!function(n,a){"object"==("undefined"===typeof exports?"undefined":Object(t["a"])(exports))&&"undefined"!=typeof e?e.exports=a():"function"==typeof define&&i("3c35")?define(a):(n=n||self).uniWeb=a()}(void 0,(function(){try{var e={};Object.defineProperty(e,"passive",{get:function(){}}),window.addEventListener("test-passive",null,e)}catch(e){}var t=Object.prototype.hasOwnProperty;function i(e,i){return t.call(e,i)}var n=[];function a(){return window.__dcloud_weex_postMessage||window.__dcloud_weex_}for(var s,r=function(e,t){var i={options:{timestamp:+new Date},name:e,arg:t};if(a()){if("postMessage"===e){var s={data:[t]};return window.__dcloud_weex_postMessage?window.__dcloud_weex_postMessage(s):window.__dcloud_weex_.postMessage(JSON.stringify(s))}var r={type:"WEB_INVOKE_APPSERVICE",args:{data:i,webviewIds:n}};window.__dcloud_weex_postMessage?window.__dcloud_weex_postMessageToService(r):window.__dcloud_weex_.postMessageToService(JSON.stringify(r))}if(!window.plus)return window.parent.postMessage({type:"WEB_INVOKE_APPSERVICE",data:i,pageId:""},"*");if(0===n.length){var o=plus.webview.currentWebview();if(!o)throw new Error("plus.webview.currentWebview() is undefined");var c=o.parent(),d="";d=c?c.id:o.id,n.push(d)}if(plus.webview.getWebviewById("__uniapp__service"))plus.webview.postMessageToUniNView({type:"WEB_INVOKE_APPSERVICE",args:{data:i,webviewIds:n}},"__uniapp__service");else{var u=JSON.stringify(i);plus.webview.getLaunchWebview().evalJS('UniPlusBridge.subscribeHandler("'.concat("WEB_INVOKE_APPSERVICE",'",').concat(u,",").concat(JSON.stringify(n),");"))}},o={navigateTo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url;r("navigateTo",{url:encodeURI(t)})},navigateBack:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.delta;r("navigateBack",{delta:parseInt(t)||1})},switchTab:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url;r("switchTab",{url:encodeURI(t)})},reLaunch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url;r("reLaunch",{url:encodeURI(t)})},redirectTo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url;r("redirectTo",{url:encodeURI(t)})},getEnv:function(e){a()?e({nvue:!0}):window.plus?e({plus:!0}):e({h5:!0})},postMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r("postMessage",e.data||{})}},c=/uni-app/i.test(navigator.userAgent),d=/Html5Plus/i.test(navigator.userAgent),u=/complete|loaded|interactive/,l=window.my&&navigator.userAgent.indexOf("AlipayClient")>-1,v=window.swan&&window.swan.webView&&/swan/i.test(navigator.userAgent),p=window.qq&&window.qq.miniProgram&&/QQ/i.test(navigator.userAgent)&&/miniProgram/i.test(navigator.userAgent),w=window.tt&&window.tt.miniProgram&&/toutiaomicroapp/i.test(navigator.userAgent),g=window.wx&&window.wx.miniProgram&&/micromessenger/i.test(navigator.userAgent)&&/miniProgram/i.test(navigator.userAgent),_=window.qa&&/quickapp/i.test(navigator.userAgent),m=window.ks&&window.ks.miniProgram&&/micromessenger/i.test(navigator.userAgent)&&/miniProgram/i.test(navigator.userAgent),f=window.tt&&window.tt.miniProgram&&/Lark|Feishu/i.test(navigator.userAgent),h=window.jd&&window.jd.miniProgram&&/micromessenger/i.test(navigator.userAgent)&&/miniProgram/i.test(navigator.userAgent),C=function(){window.UniAppJSBridge=!0,document.dispatchEvent(new CustomEvent("UniAppJSBridgeReady",{bubbles:!0,cancelable:!0}))},b=[function(e){if(c||d)return window.__dcloud_weex_postMessage||window.__dcloud_weex_?document.addEventListener("DOMContentLoaded",e):window.plus&&u.test(document.readyState)?setTimeout(e,0):document.addEventListener("plusready",e),o},function(e){if(g)return window.WeixinJSBridge&&window.WeixinJSBridge.invoke?setTimeout(e,0):document.addEventListener("WeixinJSBridgeReady",e),window.wx.miniProgram},function(e){if(p)return window.QQJSBridge&&window.QQJSBridge.invoke?setTimeout(e,0):document.addEventListener("QQJSBridgeReady",e),window.qq.miniProgram},function(e){if(l){document.addEventListener("DOMContentLoaded",e);var t=window.my;return{navigateTo:t.navigateTo,navigateBack:t.navigateBack,switchTab:t.switchTab,reLaunch:t.reLaunch,redirectTo:t.redirectTo,postMessage:t.postMessage,getEnv:t.getEnv}}},function(e){if(v)return document.addEventListener("DOMContentLoaded",e),window.swan.webView},function(e){if(w)return document.addEventListener("DOMContentLoaded",e),window.tt.miniProgram},function(e){if(_){window.QaJSBridge&&window.QaJSBridge.invoke?setTimeout(e,0):document.addEventListener("QaJSBridgeReady",e);var t=window.qa;return{navigateTo:t.navigateTo,navigateBack:t.navigateBack,switchTab:t.switchTab,reLaunch:t.reLaunch,redirectTo:t.redirectTo,postMessage:t.postMessage,getEnv:t.getEnv}}},function(e){if(m)return window.WeixinJSBridge&&window.WeixinJSBridge.invoke?setTimeout(e,0):document.addEventListener("WeixinJSBridgeReady",e),window.ks.miniProgram},function(e){if(f)return document.addEventListener("DOMContentLoaded",e),window.tt.miniProgram},function(e){if(h)return window.JDJSBridgeReady&&window.JDJSBridgeReady.invoke?setTimeout(e,0):document.addEventListener("JDJSBridgeReady",e),window.jd.miniProgram},function(e){return document.addEventListener("DOMContentLoaded",e),o}],y=0;y<b.length&&!(s=b[y](C));y++);s||(s={});var S="undefined"!=typeof uni?uni:{};if(!S.navigateTo)for(var M in s)i(s,M)&&(S[M]=s[M]);return S.webView=s,S}))}).call(this,i("dd40")(e))},6326:function(e,t,i){},dd40:function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}}}]);